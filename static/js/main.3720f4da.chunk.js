(this.webpackJsonpaod=this.webpackJsonpaod||[]).push([[0],{147:function(e,n){},216:function(e,n,t){e.exports=t(264)},233:function(e,n,t){},258:function(e,n){},264:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(34),i=t.n(o),c=t(191),l=t(39),s=t(193),d=(t(233),t(0)),u=t(12),p=t(146),m=t(330),h=t(329),g=t(135),f=t(192),w=t(317),b=t(196),v=t(319);var E=t(14),x=t(335),k=t(324),S=t(325),y=t(323),O=t(137),j=t(326),C=t(188),N=t.n(C),A=t(189),I=t.n(A),T=t(318),W=t(320),P=t(327),R=t(328),D=t(190),B=t.n(D),z=function(e,n){var t=e.name,a=e.coordinates;return r.a.createElement(g.a,{key:n,longitude:a[0],latitude:a[1],captureDrag:!1,captureDoubleClick:!1},r.a.createElement("div",{className:"place"},r.a.createElement("span",null,t)))},L=Object(w.a)((function(e){return{root:{display:"flex",width:"100%","& > * + *":{marginTop:e.spacing(2)}},geocoder:{zIndex:4,textAlign:"center",margin:"1rem auto",width:"80%"},appBar:{backgroundColor:"unset",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240},title:{flexGrow:1,overflow:"visible"},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(p.a)(Object(p.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-start"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}})),J={longitude:-.03,latitude:51.49,zoom:9,pitch:0,bearing:0,minZoom:9,maxZoom:17};function Z(e){e.showBorder,e.onTilesLoad;var n=L(),t="pk.eyJ1IjoiZ2xhLWdpcyIsImEiOiJjanBvNGh1bncwOTkzNDNueWt5MGU1ZGtiIn0.XFxLdq2dXttcXSXTiREPTA",o=new h.a({data:"https://circular-attraction.glitch.me/data/aod-hexes/{z}/{x}/{y}.pbf",minZoom:9,maxZoom:17,getLineColor:[224,224,224],getFillColor:function(e){return[255,255,255,255*e.properties.aod_prop]},pickable:!0}),i=Object(a.useState)(J),c=Object(u.a)(i,2),l=c[0],s=c[1],p=Object(a.useCallback)((function(e){var n=e.viewState;s(n)}),[]),w=function(e,n){var t=r.a.useState((function(){var t=localStorage.getItem(e);return t?JSON.parse(t):n})),a=Object(u.a)(t,2),o=a[0],i=a[1];return r.a.useEffect((function(){window.localStorage.setItem(e,JSON.stringify(o))}),[o,e]),[o,i]}("markers",[]),C=Object(u.a)(w,2),A=C[0],D=C[1],Z=Object(a.useMemo)((function(){return A}),[A]),G=r.a.useState(!0),M=Object(u.a)(G,2),U=M[0],X=M[1];return r.a.createElement("div",{className:n.root},r.a.createElement(y.a,null),r.a.createElement(k.a,{position:"fixed",className:Object(E.a)(n.appBar,Object(d.a)({},n.appBarShift,U))},r.a.createElement(S.a,null,r.a.createElement(O.a,{variant:"h6",noWrap:!0,className:n.title},r.a.createElement("div",{className:n.geocoder},r.a.createElement(f.a,Object.assign({tabIndex:0,inputPlaceholder:"Search Postcode or Address",accessToken:t,onSelect:function(e){D(A.concat([{name:e.text,coordinates:[e.center[0],e.center[1]]}])),s({longitude:e.center[0],latitude:e.center[1],zoom:14,transitionDuration:600})},showLoader:!0,focusOnMount:!0},{country:"gb",proximity:{longitude:0,latitude:51.49},bbox:[-.489,51.28,.236,51.686]}))," ")," "),r.a.createElement(v.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:function(){X(!0)},className:Object(E.a)(U&&n.hide)},r.a.createElement(N.a,null)))),r.a.createElement("main",{className:Object(E.a)(n.content,Object(d.a)({},n.contentShift,U))},r.a.createElement(m.a,{ContextProvider:g.c.Provider,layers:[o],views:new b.a({width:"".concat(U?document.querySelector("#root").offsetWidth-240+"px":"100%"),repeat:!0}),viewState:l,onViewStateChange:p,controller:!0,getTooltip:function(e){var n=e.object;return n&&{html:"        <div>Access to Public Open Space score: ".concat(-999!==n.properties.aod_prop?n.properties.aod_prop:"n/a","</div>")}}},r.a.createElement("style",null,"\n.place:before {\n  content: ' ';\n  display: inline-block;\n  width: 8px;\n  height: 8px;\n  background: red;\n  border-radius: 8px;\n  margin: 0 8px;\n}\n.place {\n  border-radius: 20px;\n  padding-right: 12px;\n  margin: -12px;\n  color: transparent;\n  line-height: 24px;\n  font-size: 13px;\n  white-space: nowrap;\n  background: rgba(0,0,0,0.8);\n}\n.place span {\n  /* display: none; */\n  color: #fff;\n  display: inline-block;\n}\n.place:hover {\n  background: rgba(0,0,0,0.8);\n  color: #fff;\n}\n.place:hover span {\n  display: inline-block;\n}\n"),Z.map(z),r.a.createElement(g.b,{reuseMaps:!0,mapStyle:"os_night.json",preventStyleDiffing:!1,mapboxApiAccessToken:t}))),r.a.createElement(x.a,{className:n.drawer,variant:"persistent",anchor:"right",open:U,classes:{paper:n.drawerPaper}},r.a.createElement("div",{className:n.drawerHeader},r.a.createElement(v.a,{onClick:function(){X(!1)}},r.a.createElement(I.a,null))),r.a.createElement(j.a,null),r.a.createElement(T.a,null,r.a.createElement("div",{style:{padding:"0 1rem"}},r.a.createElement("h3",null,"Access to Public Open Space score"),r.a.createElement("p",null,"The score for each hex area shows the proportion of households within this area that are located in an Area of Deficiency in access to local and district public open space (AoD)."),r.a.createElement("p",null,"The lighter areas of the map show where there is less access to public open space, and so a light cell with a score of 1 means that all households in that area are in an AoD."," "),r.a.createElement("p",null,"Cells with a value of ",r.a.createElement("code",null,"n/a")," have either no households or data")),r.a.createElement(j.a,null),r.a.createElement("div",{style:{padding:"0 1rem"}},A.length>0?r.a.createElement("h3",null,"Saved places"):"",Z.map((function(e,n){return r.a.createElement(W.a,{button:!0,key:e.name},r.a.createElement(P.a,null,r.a.createElement(B.a,{tabIndex:0,onClick:function(){return function(e){D(A.filter((function(n){return n.name!==e.name})))}(e)}})),r.a.createElement(R.a,{tabIndex:0,primary:e.name,onClick:function(){return function(e){s({longitude:e.coordinates[0],latitude:e.coordinates[1],zoom:14,transitionDuration:400})}(e)}}))}))))))}var G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(s.a,{ReactRouterRoute:l.a},r.a.createElement(Z,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/aod",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/aod","/service-worker.js");G?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):M(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):M(n,e)}))}}()}},[[216,1,2]]]);
//# sourceMappingURL=main.3720f4da.chunk.js.map